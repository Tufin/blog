<html lang="en">
    <body>
        <script>
            window.onload = function () {
                document.getElementById('lblCode').innerHTML = '+' + getCode();
            }

            function goToWhatsApp() {
                const phone = refit(document.getElementById("nPhone").value);
                if (len(phone) !== 9) {
                    alert("Invalid number :(");
                } else {
                    window.location.href = 'http://api.whatsapp.com/send?phone=' + getCode() + phone
                }
            }

            function getCode() {
                const urlParams = new URLSearchParams(window.location.search);
                const code = urlParams.get('code');
                if (code !== null && code !== "") {
                    return code
                }
                return "972"
            }

            function refit(phone) {
                if (phone.charAt(0) === "0") {
                    return phone.substring(1);
                }
                return phone
            }

            function len(phone) {
                let size = 0, key = -1;
                for (key in phone) {
                    if (phone.hasOwnProperty(key)) {
                        size++;
                    }
                }
                return size;
            }
        </script>

        <br>
        <label id="lblCode"></label>
        <input autofocus
               type="number"
               id="nPhone"
               onkeydown = "if (event.keyCode == 13) document.getElementById('btnWhatsApp').click()"/>
        <button id="btnWhatsApp"
                type="button"
                onclick="goToWhatsApp()">WhatsApp</button>
    </body>
</html>